---
import "@fontsource/ibm-plex-sans/400.css";
import "@fontsource/ibm-plex-sans/600.css";
import "@fontsource/ibm-plex-sans/700.css";
import "@fontsource-variable/chivo";
import "../styles/global.css";
import Footer from "../components/shared/Footer.astro";
import SEO from "../components/shared/SEO.astro";

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Madusha Sandaruwan - Portfolio" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <SEO title={title} description={description} />
    <!-- Preconnect to external domains for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="dns-prefetch" href="https://cdn.sanity.io" />
    <script is:inline>
      // Dark mode initialization
      const theme = (() => {
        if (
          typeof localStorage !== "undefined" &&
          localStorage.getItem("theme")
        ) {
          return localStorage.getItem("theme");
        }
        if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          return "dark";
        }
        return "light";
      })();
      if (theme === "dark") {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
      window.localStorage.setItem("theme", theme);
    </script>
    <script>
      import Lenis from "lenis";

      const lenis = new Lenis();

      function raf(time: number) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }

      requestAnimationFrame(raf);
    </script>
  </head>
  <body
    class="font-sans antialiased text-foreground bg-background transition-colors duration-300"
  >
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link sr-only focus:not-sr-only">
      Skip to main content
    </a>
    <slot />
    <Footer />
  </body>
</html>
